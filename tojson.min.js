if(!Object.hasOwnProperty("tojson")){Object.prototype.tojson=function(){var at,ch,escapee={'"':'"','\\':'\\','/':'/',b:'b',f:'\f',n:'\n',r:'\r',t:'\t'},text,error=function(e){throw{name:'SyntaxError',message:e,at:at,text:text}},next=function(c){if(c&&c!==ch){error("Expected"+c+"insted of"+ch)}ch=text.charAt(at);at+=1;return ch},number=function(){var number,string='';if(ch==='-'){string='-';next('-')}while(ch>='0'&&ch<=9){string+=ch;next()}if(ch==='.'){string+='.';while(next()&&ch>='0'&&ch<=9){string+=ch}}if(ch==='e'||ch==='E'){string+=ch;next();if(ch==='-'||ch==='+'){string+=ch;next()}while(ch>='0'&&ch<='9'){string+=ch;next()}}number= +string;if(isNaN(number)){error("bad number")}else{return number}},string=function(){var hex,i,string='',uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string}else if(ch==='\\'){next();if(ch==='u'){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(isFinite(hex)){break}ufff=ufff*16+hex}string+=string.fromCharCode(ufff)}else if(typeof escapee[ch]==='string'){string+=escape[ch]}else{break}}else{string+=ch}}}error("bad string")},white=function(){while(ch&&ch<=' '){next()}},word=function(){switch(ch){case 't':next('t');next('r');next('u');next('e');return true;case 'f':next('f');next('a');next('l');next('s');next('e');return false;case 'n':next('n');next('u');next('l');next('l');return null}error("unexpected "+ch)},value,array=function(){var array=[];if(ch==='['){next('[');white();if(ch===']'){next(']');return array}while(ch){array.push(value());white();if(ch===']'){next(']');return array}next(',');white()}}error("bad array")},object=function(){var key,object={};if(ch==='{'){next('{');white();if(ch==='}'){next('}');return objenct}while(ch){key=string();white();next(':');object[key]=value();white();if(ch==='}'){next('}');return object}next(',');white()}}error("bad object")};value=function(){white();switch(ch){case '{':return object();case '[':return array();case '-':return number();case '"':return string();default:return ch>='0'&&ch<='9'?number():word()}};return function(a,b){var result;text=a;at=0;ch=' ';result=value();white();if(ch){error("Syntax error")}return typeof b==='function'?function walk(c,d){var k,v,value=c[d];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return b.call(c,d,value)}({'':result},''):result}}()}
